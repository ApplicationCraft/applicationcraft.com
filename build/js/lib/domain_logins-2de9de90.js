$(function(){function waGetAppLoginsFromCookie(){var cookieValue=null,name="domainLogins";if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}var ret=[];try{ret=eval(cookieValue)}catch(e){}return ret=jQuery.isArray(ret)?ret:[],ret}function getLoginLinkAttrs(){var e=waGetAppLoginsFromCookie(),t=e.length>0?{href:"http://"+e[0],target:"_blank"}:{href:"#",target:""};return t}function waUpdateLoginList(e){domainLogins=$('<div class="waDomainLogins"></div>');var t=waGetAppLoginsFromCookie(),n=function(e){return function(){window.open("http://"+e)}};for(var r=0,i=t.length;r<i;r++){var s=$("<span class='wa-login-item'></span>").text(t[r]).bind("click",n(t[r]));domainLogins.append(s)}e.append(domainLogins)}function waInitControls(e){var t=$("<input type='text' class='wa-login-input'>"),n=$("<button class='btn'>Go</button>");t.focus(function(){$(this).addClass("wa-logins-input-focus")}),t.blur(function(){$(this).removeClass("wa-logins-input-focus")}),n.click(function(){t.val()!=""?(window.open("http://"+t.val()+".applicationcraft.com"),t.val(""),$(this).parent(".waLoginList").hide()):t.focus()}),t.keypress(function(e){e.keyCode==13?n.click():null});var r=$("<span class='wa-login-textspan'></span>").text(".applicationcraft.com");r.click(function(){n.click()});var i=$("<div class='wa-login-bottom'></div>").append(t,r,n);e.append(i)}var links,waSetMenuPos=function(e){var t=e.width()-($(document).width()-e.parent().offset().left);t>0?e.css("left",-(t-0+60)+"px"):e.css("left","");var n=e.height()-($(document).height()-e.parent().offset().top);n>0?e.css("top",-(n-0+42)+"px"):e.css("top","")},waInitLoginList=function(){var e=$(".waLoginList");links=$(".waLoginListLink"),links.attr(getLoginLinkAttrs()),$(".waLoginListDiv").each(function(e,t){$(t).empty(),waUpdateLoginList($(t)),waInitControls($(t))})};waInitLoginList()});