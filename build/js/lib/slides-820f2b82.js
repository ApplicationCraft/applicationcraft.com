/*! Responsive Carousel - v0.1.0 - 2012-10-23
* https://github.com/filamentgroup/responsive-carousel
* Copyright (c) 2012 Filament Group, Inc.; Licensed MIT, GPL */
/*
 * responsive-carousel
 * https://github.com/filamentgroup/responsive-carousel
 *
 * Copyright (c) 2012 Filament Group, Inc.
 * Licensed under the MIT, GPL licenses.
 */
(function(e){var t="carousel",n="."+t,r="data-transition",i=t+"-transitioning",s=t+"-item",o=t+"-active",u=t+"-in",a=t+"-out",f=t+"-nav",l=function(){var e="webkit Moz O Ms".split(" "),t=!1,n;while(e.length){n=e.shift()+"Transition";if(n in document.documentElement.style!==undefined&&n in document.documentElement.style!=0){t=!0;break}}return t}(),c={_create:function(){e(this).trigger("beforecreate."+t)[t]("_init")[t]("_addNextPrev").trigger("create."+t)},_init:function(){var n=e(this).attr(r);return n||(l=!1),e(this).addClass(t+" "+(n?t+"-"+n:"")+" ").children().addClass(s).first().addClass(o)},next:function(){e(this)[t]("goTo","+1")},prev:function(){e(this)[t]("goTo","-1")},goTo:function(n){var i=e(this),f=i.attr(r),c=" "+t+"-"+f+"-reverse";e(this).find("."+s).removeClass([a,u,c].join(" "));var h=e(this).find("."+o),p=h.index(),d=(p<0?0:p)+1,v=typeof n=="number"?n:d+parseFloat(n),m=e(this).find(".carousel-item").eq(v-1),g=typeof n=="string"&&!parseFloat(n)||v>d?"":c;m.length||(m=e(this).find("."+s)[g.length?"last":"first"]()),l?i[t]("_transitionStart",h,m,g):(m.addClass(o),i[t]("_transitionEnd",h,m,g)),i.trigger("goto."+t,m)},update:function(){return e(this).children().not("."+f).addClass(s),e(this).trigger("update."+t)},_transitionStart:function(n,r,i){var s=e(this);r.one(navigator.userAgent.indexOf("AppleWebKit")>-1?"webkitTransitionEnd":"transitionend otransitionend",function(){s[t]("_transitionEnd",n,r,i)}),e(this).addClass(i),n.addClass(a),r.addClass(u)},_transitionEnd:function(t,n,r){e(this).removeClass(r),t.removeClass(a+" "+o),n.removeClass(u).addClass(o)},_bindEventListeners:function(){var n=e(this).bind("click",function(r){var i=e(r.target).closest("a[href='#next'],a[href='#prev']");i.length&&(n[t](i.is("[href='#next']")?"next":"prev"),r.preventDefault())});return this},_addNextPrev:function(){return e(this).append("<nav class='"+f+"'><a href='#prev' class='prev' aria-hidden='true' title='Previous'>Prev</a><a href='#next' class='next' aria-hidden='true' title='Next'>Next</a></nav>")[t]("_bindEventListeners")},destroy:function(){}};e.fn[t]=function(n,r,i,s){return this.each(function(){if(n&&typeof n=="string")return e.fn[t].prototype[n].call(this,r,i,s);if(e(this).data(t+"data"))return e(this);e(this).data(t+"active",!0),e.fn[t].prototype._create.call(this)})},e.extend(e.fn[t].prototype,c),e(function(){e(n)[t]()})})(jQuery),function(e){var t="carousel",n="."+t,r=t+"-no-transition",i=/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,s={_dragBehavior:function(){var t=e(this),s,o={},u,a,f=function(t){var r=t.touches||t.originalEvent.touches,i=e(t.target).closest(n);t.type==="touchstart"&&(s={x:r[0].pageX,y:r[0].pageY}),r[0]&&r[0].pageX&&(o.touches=r,o.deltaX=r[0].pageX-s.x,o.deltaY=r[0].pageY-s.y,o.w=i.width(),o.h=i.height(),o.xPercent=o.deltaX/o.w,o.yPercent=o.deltaY/o.h,o.srcEvent=t)},l=function(t){f(t),e(t.target).closest(n).trigger("drag"+t.type.split("touch")[1],o)};e(this).bind("touchstart",function(t){e(this).addClass(r),l(t)}).bind("touchmove",function(e){f(e),l(e),i||(e.preventDefault(),window.scrollBy(0,-o.deltaY))}).bind("touchend",function(t){e(this).removeClass(r),l(t)})}};e.extend(e.fn[t].prototype,s),e(n).live("create."+t,function(){e(this)[t]("_dragBehavior")})}(jQuery),function(e){var t="carousel",n="."+t,r=t+"-active",i=t+"-item",s=function(e){return Math.abs(e)>4},o=function(e,n){var r=e.find("."+t+"-active"),s=r.prevAll().length+1,o=n<0,u=s+(o?1:-1),a=e.find("."+i).eq(u-1);return a.length||(a=e.find("."+i)[o?"first":"last"]()),[r,a]};e(n).live("dragmove",function(t,n){if(!s(n.deltaX))return;var r=o(e(this),n.deltaX);r[0].css("left",n.deltaX+"px"),r[1].css("left",n.deltaX<0?n.w+n.deltaX+"px":-n.w+n.deltaX+"px")}).live("dragend",function(t,n){if(!s(n.deltaX))return;var i=o(e(this),n.deltaX),u=Math.abs(n.deltaX)>45;e(this).one(navigator.userAgent.indexOf("AppleWebKit")?"webkitTransitionEnd":"transitionEnd",function(){i[0].add(i[1]).css("left","")}),u?(i[0].removeClass(r).css("left",n.deltaX>0?n.w+"px":-n.w+"px"),i[1].addClass(r).css("left",0)):(i[0].css("left",0),i[1].css("left",n.deltaX>0?-n.w+"px":n.w+"px"))})}(jQuery),function(e,t){var n="carousel",r="."+n+"[data-paginate]",i=n+"-pagination",s=n+"-active-page",o={_createPagination:function(){var t=e(this).find("."+n+"-nav"),r=e(this).find("."+n+"-item"),s=e("<ol class='"+i+"'></ol>"),o;t.find("."+i).remove();for(var u=0,a=r.length;u<a;u++)o=u+1,s.append("<li><a href='#"+o+"' title='Go to slide "+o+"'>"+o+"</a>");t.addClass(n+"-nav-paginated").find("a").first().after(s)},_bindPaginationEvents:function(){e(this).bind("click",function(t){var r=e(t.target).closest("a"),s=r.attr("href");r.closest("."+i).length&&s&&(e(this)[n]("goTo",parseFloat(s.split("#")[1])),t.preventDefault())}).bind("goto."+n,function(t,n){var r=n?e(n).index():0;e(this).find("ol."+i+" li").removeClass(s).eq(r).addClass(s)}).trigger("goto."+n)}};e.extend(e.fn[n].prototype,o),e(r).live("create."+n,function(){e(this)[n]("_createPagination")[n]("_bindPaginationEvents")}).live("update."+n,function(){e(this)[n]("_createPagination")})}(jQuery),function(e,t){var n="carousel",r="."+n,i=4e3,s={play:function(){var t=e(this),r=t.attr("data-interval"),s=parseFloat(r)||i;return t.data("timer",setInterval(function(){t[n]("next")},s))},stop:function(){clearTimeout(e(this).data("timer"))},_bindStopListener:function(){return e(this).bind("mousedown",function(){e(this)[n]("stop")})},_initAutoPlay:function(){var r=e(this).attr("data-autoplay");r!==t&&r!==!1&&e(this)[n]("_bindStopListener")[n]("play")}};e.extend(e.fn[n].prototype,s),e(r).live("create."+n,function(){e(this)[n]("_initAutoPlay")})}(jQuery),function(e){var t="carousel",n="."+t,r=t+"-active",i=t+"-item",s=function(e){return Math.abs(e)>4},o=function(e,n){var r=e.find("."+t+"-active"),s=r.prevAll().length+1,o=n<0,u=s+(o?1:-1),a=e.find("."+i).eq(u-1);return a.length||(a=e.find("."+i)[o?"first":"last"]()),[r,a]};e(n).live("dragmove",function(t,n){if(!s(n.deltaX))return;var r=o(e(this),n.deltaX);r[0].css("left",n.deltaX+"px"),r[1].css("left",n.deltaX<0?n.w+n.deltaX+"px":-n.w+n.deltaX+"px")}).live("dragend",function(t,n){if(!s(n.deltaX))return;var i=o(e(this),n.deltaX),u=Math.abs(n.deltaX)>45;e(this).one(navigator.userAgent.indexOf("AppleWebKit")?"webkitTransitionEnd":"transitionEnd",function(){i[0].add(i[1]).css("left","")}),u?(i[0].removeClass(r).css("left",n.deltaX>0?n.w+"px":-n.w+"px"),i[1].addClass(r).css("left",0)):(i[0].css("left",0),i[1].css("left",n.deltaX>0?-n.w+"px":n.w+"px"))})}(jQuery),function(e){var t="carousel",n="."+t,r=t+"-no-transition",i=/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,s={_dragBehavior:function(){var t=e(this),s,o={},u,a,f=function(t){var r=t.touches||t.originalEvent.touches,i=e(t.target).closest(n);t.type==="touchstart"&&(s={x:r[0].pageX,y:r[0].pageY}),r[0]&&r[0].pageX&&(o.touches=r,o.deltaX=r[0].pageX-s.x,o.deltaY=r[0].pageY-s.y,o.w=i.width(),o.h=i.height(),o.xPercent=o.deltaX/o.w,o.yPercent=o.deltaY/o.h,o.srcEvent=t)},l=function(t){f(t),e(t.target).closest(n).trigger("drag"+t.type.split("touch")[1],o)};e(this).bind("touchstart",function(t){e(this).addClass(r),l(t)}).bind("touchmove",function(e){f(e),l(e),i||(e.preventDefault(),window.scrollBy(0,-o.deltaY))}).bind("touchend",function(t){e(this).removeClass(r),l(t)})}};e.extend(e.fn[t].prototype,s),e(n).live("create."+t,function(){e(this)[t]("_dragBehavior")})}(jQuery),function(e){var t="carousel",n="."+t,r=t+"-active",i=t+"-top",s=t+"-item",o=function(e){return e>-1&&e<0||e<1&&e>0},u=function(e,n){var r=e.find("."+t+"-active"),i=r.prevAll().length+1,o=n<0,u=i+(o?1:-1),a=e.find("."+s).eq(u-1);return a.length||(a=e.find("."+s)[o?"first":"last"]()),[r,a]};e(n).live("dragstart",function(t,n){e(this).find("."+i).removeClass(i)}).live("dragmove",function(t,n){if(!o(n.xPercent))return;var r=u(e(this),n.deltaX),s=n.xPercent*180,a=Math.abs(n.xPercent)>.5;r[0].css("-webkit-transform","rotateY("+s+"deg)"),r[1].css("-webkit-transform","rotateY("+((s>0?-180:180)+s)+"deg)"),r[a?1:0].addClass(i),r[a?0:1].removeClass(i)}).live("dragend",function(t,n){if(!o(n.xPercent))return;var s=u(e(this),n.deltaX),a=Math.abs(n.xPercent)>.5;a?(s[0].removeClass(r),s[1].addClass(r)):(s[0].addClass(r),s[1].removeClass(r)),s[0].add(s[1]).removeClass(i).css("-webkit-transform","")})}(jQuery);